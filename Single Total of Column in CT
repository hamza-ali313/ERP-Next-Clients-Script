frappe.ui.form.on('Token Received', {
	before_save: function(frm) {
		TotalAmount(frm);
	}
});

function TotalAmount(frm) {
	const ct = frm.doc.token_ct || [];
	let totalamount = 0;

	ct.forEach(row => {
		if (row.amount) {
			totalamount += parseFloat(row.amount);
		}
	});

	frm.set_value('total_amount', parseFloat(totalamount.toFixed(3)));
}


