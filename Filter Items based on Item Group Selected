frappe.ui.form.on('Sales Order', {
    refresh: function(frm){
        frm.set_query("item_code", "items", function(doc, cdt, cdn) {
			var row = locals[cdt][cdn];
			return {
				filters: {
					"item_group": row.item_group //item is the fieldname in target doctype.
				}
			}
		});
    }
});
